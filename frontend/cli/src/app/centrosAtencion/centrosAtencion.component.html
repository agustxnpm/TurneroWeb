<div class="centros-atencion-container">
  <div class="card p-xl mb-xl mx-auto">
    <!-- Header -->
    <div class="listado-header d-flex align-items-center justify-content-between mb-lg">
      <div class="d-flex align-items-center gap-md">
        <span class="material-symbols-outlined header-icon" aria-hidden="true">local_hospital</span>
        <div>
          <h2 class="mb-0">Centros de Atención</h2>
          <p class="text-muted mb-0 mt-sm">Gestión de centros médicos y establecimientos de salud</p>
        </div>
      </div>
      
      <button
        type="button"
        class="btn btn-primary"
        (click)="router.navigate(['/centrosAtencion/new'])"
        aria-label="Crear nuevo centro de atención"
      >
        <span class="material-symbols-outlined me-2" aria-hidden="true">add</span>
        <span class="d-none d-sm-inline">Nuevo Centro</span>
      </button>
    </div>

    <!-- Tabla -->
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">
              <div class="header-cell">
                <span class="material-symbols-outlined me-2" aria-hidden="true">local_hospital</span>
                Nombre
              </div>
            </th>
            <th scope="col">
              <div class="header-cell">
                <span class="material-symbols-outlined me-2" aria-hidden="true">location_on</span>
                Dirección
              </div>
            </th>
            <th scope="col">
              <div class="header-cell">
                <span class="material-symbols-outlined me-2" aria-hidden="true">location_city</span>
                Localidad
              </div>
            </th>
            <th scope="col">
              <div class="header-cell">
                <span class="material-symbols-outlined me-2" aria-hidden="true">map</span>
                Provincia
              </div>
            </th>
            <th scope="col">
              <div class="header-cell">
                <span class="material-symbols-outlined me-2" aria-hidden="true">call</span>
                Teléfono
              </div>
            </th>
            <th scope="col">
              <div class="header-cell">
                <span class="material-symbols-outlined me-2" aria-hidden="true">travel_explore</span>
                Coordenadas
              </div>
            </th>
            <th scope="col">
              <div class="header-cell">
                <span class="material-symbols-outlined me-2" aria-hidden="true">settings</span>
                Acciones
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let centro of resultsPage.content || []; let i = index"
            [class.selected]="centro.id === selectedId"
            (click)="goToDetail(centro.id)"
            role="button"
            [attr.aria-label]="'Ver detalles de ' + centro.nombre"
            tabindex="0"
          >
            <td>
              <div class="d-flex align-items-center gap-sm">
                <span class="material-symbols-outlined text-primary" aria-hidden="true">local_hospital</span>
                <strong>{{ centro.nombre }}</strong>
              </div>
            </td>
            <td>{{ centro.direccion }}</td>
            <td>{{ centro.localidad }}</td>
            <td>{{ centro.provincia }}</td>
            <td>
              <div class="d-flex align-items-center gap-xs">
                <span class="material-symbols-outlined text-muted phone-icon" aria-hidden="true">call</span>
                {{ centro.telefono }}
              </div>
            </td>
            <td>
              <div class="d-flex align-items-center gap-xs">
                <span class="text-muted">{{ centro.latitud }}, {{ centro.longitud }}</span>
              </div>
            </td>
            <td>
              <div class="d-flex gap-xs">
                <button
                  type="button"
                  class="btn btn-sm btn-outline-primary"
                  (click)="goToEdit(centro.id); $event.stopPropagation()"
                  [attr.aria-label]="'Editar ' + centro.nombre"
                  title="Editar centro"
                >
                  <span class="material-symbols-outlined" aria-hidden="true">edit</span>
                </button>
                <button
                  type="button"
                  class="btn btn-sm btn-outline-danger"
                  (click)="remove(centro); $event.stopPropagation()"
                  [attr.aria-label]="'Eliminar ' + centro.nombre"
                  title="Eliminar centro"
                >
                  <span class="material-symbols-outlined" aria-hidden="true">delete</span>
                </button>
              </div>
            </td>
          </tr>
          
          <!-- Estado vacío -->
          <tr *ngIf="resultsPage.content?.length === 0">
            <td colspan="8" class="text-center py-5">
              <div class="d-flex flex-column align-items-center gap-md">
                <span class="material-symbols-outlined empty-state-icon" aria-hidden="true">local_hospital</span>
                <p class="text-muted mb-0">No hay centros de atención registrados</p>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Footer/Paginación -->
    <div class="d-flex justify-content-center mt-lg pt-lg border-top">
      <app-pagination
        [totalPages]="resultsPage.totalPages"
        [currentPage]="currentPage"
        (pageChangeRequested)="onPageChangeRequested($event)"
        [number]="resultsPage.number"
      >
      </app-pagination>
    </div>
  </div>
</div>
