<div class="especialidad-detail-card card p-xl mb-xl mx-auto" *ngIf="especialidad" style="max-width: 1000px;">
  <!-- Header -->
  <div class="especialidad-detail-header d-flex align-items-center justify-content-between mb-lg">
    <div class="d-flex align-items-center gap-md">
      <span class="material-symbols-outlined header-icon">medical_services</span>
      <div>
        <h2 class="mb-0" *ngIf="especialidad.id && especialidad.id !== 0">
          {{ especialidad.nombre }}
        </h2>
        <h2 class="mb-0" *ngIf="!especialidad.id || especialidad.id === 0">
          Nueva Especialidad
        </h2>
        <p class="text-muted mb-0 mt-sm">
          <ng-container *ngIf="!modoEdicion && especialidad.id && especialidad.id !== 0">Información de la especialidad</ng-container>
          <ng-container *ngIf="modoEdicion && especialidad.id && especialidad.id !== 0">Editando información</ng-container>
          <ng-container *ngIf="!especialidad.id || especialidad.id === 0">Registro de nueva especialidad</ng-container>
        </p>
      </div>
    </div>
    
    <div class="d-flex gap-md" *ngIf="!modoEdicion && especialidad.id && especialidad.id !== 0">
      <button type="button" class="btn btn-primary" (click)="activarEdicion()" aria-label="Editar información de la especialidad">
        <span class="material-symbols-outlined me-2">edit</span>
        <span class="d-none d-sm-inline">Editar</span>
      </button>
      <button type="button" class="btn btn-secondary" (click)="goBack()" aria-label="Volver al listado">
        <span class="material-symbols-outlined me-2">arrow_back</span>
        <span class="d-none d-sm-inline">Volver</span>
      </button>
    </div>
  </div>

  <!-- MODO VISTA (Solo lectura) -->
  <div *ngIf="!modoEdicion && especialidad.id && especialidad.id !== 0" class="especialidad-info-view">
    <div class="row g-4">
      <div class="col-md-6">
        <div class="info-item">
          <span class="material-symbols-outlined info-icon">medical_services</span>
          <div class="info-content">
            <label class="info-label">Nombre de la Especialidad</label>
            <div class="info-value">{{ especialidad.nombre }}</div>
          </div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="info-item">
          <span class="material-symbols-outlined info-icon">tag</span>
          <div class="info-content">
            <label class="info-label">ID</label>
            <div class="info-value">#{{ especialidad.id }}</div>
          </div>
        </div>
      </div>

      <div class="col-12">
        <div class="info-item">
          <span class="material-symbols-outlined info-icon">description</span>
          <div class="info-content">
            <label class="info-label">Descripción</label>
            <div class="info-value">{{ especialidad.descripcion || 'Sin descripción' }}</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODO EDICIÓN/CREACIÓN -->
  <form *ngIf="modoEdicion || !especialidad.id || especialidad.id === 0" #form="ngForm" (ngSubmit)="save()" novalidate>
    <div class="row g-4">
      <!-- Nombre -->
      <div class="col-12">
        <div class="form-group mb-lg">
          <label class="form-label" for="nombre">
            <span class="material-symbols-outlined me-2">medical_services</span>
            Nombre de la Especialidad*
          </label>
          <input
            type="text"
            id="nombre"
            name="nombre"
            class="form-control"
            [(ngModel)]="especialidad.nombre"
            required
            placeholder="Ej: Cardiología, Neurología..."
            autocomplete="off"
            aria-label="Nombre de la especialidad"
            #nombre="ngModel"
          />
          <small class="form-text text-danger d-flex align-items-center gap-xs mt-xs" *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)">
            <span class="material-symbols-outlined" style="font-size: 1rem;">error</span>
            El nombre es requerido
          </small>
        </div>
      </div>

      <!-- Descripción -->
      <div class="col-12">
        <div class="form-group mb-lg">
          <label class="form-label" for="descripcion">
            <span class="material-symbols-outlined me-2">description</span>
            Descripción
          </label>
          <textarea
            id="descripcion"
            name="descripcion"
            class="form-control"
            [(ngModel)]="especialidad.descripcion"
            rows="4"
            placeholder="Describe las características y ámbito de esta especialidad médica..."
            autocomplete="off"
            aria-label="Descripción de la especialidad"
            #descripcion="ngModel"
          ></textarea>
          <small class="form-text text-muted d-flex align-items-center gap-xs mt-xs">
            <span class="material-symbols-outlined" style="font-size: 1rem;">info</span>
            Opcional: Proporcione información adicional sobre esta especialidad
          </small>
        </div>
      </div>
    </div>

    <!-- Botones de acción -->
    <div class="d-flex flex-wrap gap-md mt-xl pt-lg border-top">
      <button
        type="submit"
        class="btn btn-success"
        [disabled]="form.invalid || allFieldsEmpty()"
        aria-label="Guardar especialidad"
      >
        <span class="material-symbols-outlined me-2">save</span>
        Guardar Especialidad
      </button>

      <button
        type="button"
        class="btn btn-secondary"
        (click)="goBack()"
        aria-label="Cancelar cambios"
      >
        <span class="material-symbols-outlined me-2">close</span>
        Cancelar
      </button>

      <button
        *ngIf="especialidad.id && especialidad.id !== 0 && modoEdicion"
        type="button"
        class="btn btn-danger"
        (click)="confirmDelete()"
        aria-label="Eliminar especialidad"
      >
        <span class="material-symbols-outlined me-2">delete</span>
        Eliminar
      </button>
    </div>
  </form>
</div>

