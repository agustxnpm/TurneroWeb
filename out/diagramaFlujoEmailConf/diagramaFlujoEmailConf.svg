<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1467px" preserveAspectRatio="none" style="width:1782px;height:1467px;background:#FFFFFF;" version="1.1" viewBox="0 0 1782 1467" width="1782px" zoomAndPan="magnify"><defs/><g><rect fill="#F9F9F9" height="1455.6524" style="stroke:#000000;stroke-width:1.0;" width="898.5" x="743" y="6"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="1120.25" y="19.897">Backend (Spring Boot)</text><rect fill="#FFFFFF" height="49.412" style="stroke:#000000;stroke-width:1.0;" width="10" x="342.5" y="251.598"/><rect fill="#FFFFFF" height="1067.5744" style="stroke:#000000;stroke-width:1.0;" width="10" x="557.5" y="301.01"/><rect fill="#FFFFFF" height="927.7504" style="stroke:#000000;stroke-width:1.0;" width="10" x="791.5" y="440.8341"/><rect fill="#FFFFFF" height="195.2361" style="stroke:#000000;stroke-width:1.0;" width="10" x="1071.5" y="472.5401"/><rect fill="#FFFFFF" height="589.6902" style="stroke:#000000;stroke-width:1.0;" width="10" x="1273.5" y="771.8943"/><rect fill="#FFFFFF" height="31.706" style="stroke:#000000;stroke-width:1.0;" width="10" x="1689" y="504.2461"/><rect fill="#FFFFFF" height="633.1022" style="stroke:#000000;stroke-width:1.0;" width="1750.5" x="15" y="728.4822"/><rect fill="#FFFFFF" height="535.9842" style="stroke:#000000;stroke-width:1.0;" width="1730.5" x="25" y="818.6003"/><rect fill="#FFFFFF" height="366.7481" style="stroke:#000000;stroke-width:1.0;" width="1710.5" x="35" y="980.8364"/><rect fill="#FFFFFF" height="251.924" style="stroke:none;stroke-width:1.0;" width="1710.5" x="35" y="1095.6604"/><line style="stroke:#000000;stroke-width:1.0;" x1="76" x2="76" y1="85.0679" y2="1378.5844"/><line style="stroke:#000000;stroke-width:1.0;" x1="347" x2="347" y1="85.0679" y2="1378.5844"/><line style="stroke:#000000;stroke-width:1.0;" x1="562" x2="562" y1="85.0679" y2="1378.5844"/><line style="stroke:#000000;stroke-width:1.0;" x1="796" x2="796" y1="85.0679" y2="1378.5844"/><line style="stroke:#000000;stroke-width:1.0;" x1="1076.5" x2="1076.5" y1="85.0679" y2="1378.5844"/><line style="stroke:#000000;stroke-width:1.0;" x1="1278.5" x2="1278.5" y1="85.0679" y2="1378.5844"/><line style="stroke:#000000;stroke-width:1.0;" x1="1590.5" x2="1590.5" y1="85.0679" y2="1378.5844"/><line style="stroke:#000000;stroke-width:1.0;" x1="1693.5" x2="1693.5" y1="85.0679" y2="1378.5844"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57" x="45" y="80.9659">Paciente</text><ellipse cx="76.5" cy="14" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M76.5,22 L76.5,49 M63.5,30 L89.5,30 M76.5,49 L63.5,64 M76.5,49 L89.5,64 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="57" x="45" y="1392.5504">Paciente</text><ellipse cx="76.5" cy="1405.6524" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1.0;"/><path d="M76.5,1413.6524 L76.5,1440.6524 M63.5,1421.6524 L89.5,1421.6524 M76.5,1440.6524 L63.5,1455.6524 M76.5,1440.6524 L89.5,1455.6524 " fill="none" style="stroke:#000000;stroke-width:1.0;"/><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="131" x="282" y="31.9321"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="117" x="289" y="53.898">Cliente de Correo</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104" x="295.5" y="72.9659">(Gmail/Outlook)</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="131" x="282" y="1377.5844"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="117" x="289" y="1399.5504">Cliente de Correo</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104" x="295.5" y="1418.6183">(Gmail/Outlook)</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="129" x="498" y="31.9321"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61" x="532" y="53.898">Frontend</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115" x="505" y="72.9659">(DeepLinkBridge)</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="129" x="498" y="1377.5844"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61" x="532" y="1399.5504">Frontend</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="115" x="505" y="1418.6183">(DeepLinkBridge)</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="79" x="757" y="31.9321"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="62" x="765.5" y="53.898">DeepLink</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65" x="764" y="72.9659">Presenter</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="79" x="757" y="1377.5844"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="62" x="765.5" y="1399.5504">DeepLink</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="65" x="764" y="1418.6183">Presenter</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="76" x="1038.5" y="31.9321"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="62" x="1045.5" y="53.898">DeepLink</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48" x="1052.5" y="72.9659">Service</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="76" x="1038.5" y="1377.5844"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="62" x="1045.5" y="1399.5504">DeepLink</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48" x="1052.5" y="1418.6183">Service</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="62" x="1247.5" y="31.9321"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40" x="1258.5" y="53.898">Turno</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48" x="1254.5" y="72.9659">Service</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="62" x="1247.5" y="1377.5844"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40" x="1258.5" y="1399.5504">Turno</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48" x="1254.5" y="1418.6183">Service</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="74" x="1553.5" y="31.9321"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="60" x="1560.5" y="53.898">AuditLog</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48" x="1566.5" y="72.9659">Service</text><rect fill="#FFFFFF" height="52.1358" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="74" x="1553.5" y="1377.5844"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="60" x="1560.5" y="1399.5504">AuditLog</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="48" x="1566.5" y="1418.6183">Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77" x="1652.5" y="80.9659">PostgreSQL</text><path d="M1676,30 C1676,20 1694,20 1694,20 C1694,20 1712,20 1712,30 L1712,56 C1712,66 1694,66 1694,66 C1694,66 1676,66 1676,56 L1676,30 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><path d="M1676,30 C1676,40 1694,40 1694,40 C1694,40 1712,40 1712,30 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77" x="1652.5" y="1392.5504">PostgreSQL</text><path d="M1676,1406.6524 C1676,1396.6524 1694,1396.6524 1694,1396.6524 C1694,1396.6524 1712,1396.6524 1712,1406.6524 L1712,1432.6524 C1712,1442.6524 1694,1442.6524 1694,1442.6524 C1694,1442.6524 1676,1442.6524 1676,1432.6524 L1676,1406.6524 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><path d="M1676,1406.6524 C1676,1416.6524 1694,1416.6524 1694,1416.6524 C1694,1416.6524 1712,1416.6524 1712,1406.6524 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" height="49.412" style="stroke:#000000;stroke-width:1.0;" width="10" x="342.5" y="251.598"/><rect fill="#FFFFFF" height="1067.5744" style="stroke:#000000;stroke-width:1.0;" width="10" x="557.5" y="301.01"/><rect fill="#FFFFFF" height="927.7504" style="stroke:#000000;stroke-width:1.0;" width="10" x="791.5" y="440.8341"/><rect fill="#FFFFFF" height="195.2361" style="stroke:#000000;stroke-width:1.0;" width="10" x="1071.5" y="472.5401"/><rect fill="#FFFFFF" height="589.6902" style="stroke:#000000;stroke-width:1.0;" width="10" x="1273.5" y="771.8943"/><rect fill="#FFFFFF" height="31.706" style="stroke:#000000;stroke-width:1.0;" width="10" x="1689" y="504.2461"/><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1770.5" x="5" y="116.9209"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1775.5" y1="116.9209" y2="116.9209"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1775.5" y1="119.9209" y2="119.9209"/><rect fill="#FFFFFF" height="25.706" style="stroke:#000000;stroke-width:1.0;" width="179" x="800.75" y="105.0679"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162" x="806.75" y="122.9649">1. Acceso desde el Correo</text><path d="M81,145.7739 L81,190.7739 L460,190.7739 L460,155.7739 L450,145.7739 L81,145.7739 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M450,145.7739 L450,155.7739 L460,155.7739 L450,145.7739 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="233" x="87" y="164.6709">El correo contiene un enlace &#250;nico tipo:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="358" x="87" y="182.377">/deep-link?token=abc-123-xyz&amp;action=CONFIRMAR_TURNO</text><polygon fill="#000000" points="335.5,215.892,345.5,219.892,335.5,223.892,339.5,219.892" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="76.5" x2="341.5" y1="219.892" y2="219.892"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="83.5" y="214.083">1</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236" x="94.5" y="214.083">Abre correo de "Recordatorio de Turno"</text><polygon fill="#000000" points="330.5,247.598,340.5,251.598,330.5,255.598,334.5,251.598" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="76.5" x2="336.5" y1="251.598" y2="251.598"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="83.5" y="245.789">2</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="213" x="94.5" y="245.789">Clic en bot&#243;n "Confirmar Asistencia"</text><polygon fill="#000000" points="545.5,297.01,555.5,301.01,545.5,305.01,549.5,301.01" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="347.5" x2="551.5" y1="301.01" y2="301.01"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="354.5" y="286.348">3</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130" x="365.5" y="277.495">Redirige al navegador</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175" x="365.5" y="295.201">(DeepLinkBridgeComponent)</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1770.5" x="5" y="330.863"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1775.5" y1="330.863" y2="330.863"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1775.5" y1="333.863" y2="333.863"/><rect fill="#FFFFFF" height="25.706" style="stroke:#000000;stroke-width:1.0;" width="215" x="782.75" y="319.01"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="198" x="788.75" y="336.907">2. Validaci&#243;n del Token Seguro</text><line style="stroke:#000000;stroke-width:1.0;" x1="567.5" x2="609.5" y1="378.4221" y2="378.4221"/><line style="stroke:#000000;stroke-width:1.0;" x1="609.5" x2="609.5" y1="378.4221" y2="391.4221"/><line style="stroke:#000000;stroke-width:1.0;" x1="568.5" x2="609.5" y1="391.4221" y2="391.4221"/><polygon fill="#000000" points="578.5,387.4221,568.5,391.4221,578.5,395.4221,574.5,391.4221" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="574.5" y="372.6131">4</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141" x="585.5" y="372.6131">Extrae 'token' de la URL</text><polygon fill="#000000" points="779.5,436.8341,789.5,440.8341,779.5,444.8341,783.5,440.8341" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="567.5" x2="785.5" y1="440.8341" y2="440.8341"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="574.5" y="426.1721">5</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170" x="585.5" y="417.3191">POST /api/deep-link/validate</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122" x="585.5" y="435.0251">{ token: "abc-123..." }</text><polygon fill="#000000" points="1059.5,468.5401,1069.5,472.5401,1059.5,476.5401,1063.5,472.5401" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="801.5" x2="1065.5" y1="472.5401" y2="472.5401"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="808.5" y="466.7311">6</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127" x="819.5" y="466.7311">validateToken(token)</text><polygon fill="#000000" points="1677,500.2461,1687,504.2461,1677,508.2461,1681,504.2461" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1081.5" x2="1683" y1="504.2461" y2="504.2461"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1088.5" y="498.4371">7</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="298" x="1099.5" y="498.4371">SELECT * FROM deep_link_token WHERE token = ?</text><polygon fill="#000000" points="1092.5,531.9521,1082.5,535.9521,1092.5,539.9521,1088.5,535.9521" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1086.5" x2="1693" y1="535.9521" y2="535.9521"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1098.5" y="530.1431">8</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126" x="1109.5" y="530.1431">Retorna Token Entity</text><line style="stroke:#000000;stroke-width:1.0;" x1="1081.5" x2="1123.5" y1="567.6582" y2="567.6582"/><line style="stroke:#000000;stroke-width:1.0;" x1="1123.5" x2="1123.5" y1="567.6582" y2="580.6582"/><line style="stroke:#000000;stroke-width:1.0;" x1="1082.5" x2="1123.5" y1="580.6582" y2="580.6582"/><polygon fill="#000000" points="1092.5,576.6582,1082.5,580.6582,1092.5,584.6582,1088.5,580.6582" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="1088.5" y="561.8492">9</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167" x="1099.5" y="561.8492">Verificar Expiraci&#243;n y Estado</text><path d="M1086,593.6582 L1086,638.6582 L1326,638.6582 L1326,603.6582 L1316,593.6582 L1086,593.6582 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1316,593.6582 L1316,603.6582 L1326,603.6582 L1316,593.6582 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="219" x="1092" y="612.5552">El token debe ser v&#225;lido, no expirado</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="214" x="1092" y="630.2612">y no haber sido usado previamente.</text><polygon fill="#000000" points="812.5,663.7762,802.5,667.7762,812.5,671.7762,808.5,667.7762" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="806.5" x2="1075.5" y1="667.7762" y2="667.7762"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="818.5" y="661.9672">10</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="228" x="836.5" y="661.9672">TokenV&#225;lido (payload: turnoId, action)</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1770.5" x="5" y="697.6292"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1775.5" y1="697.6292" y2="697.6292"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1775.5" y1="700.6292" y2="700.6292"/><rect fill="#FFFFFF" height="25.706" style="stroke:#000000;stroke-width:1.0;" width="220" x="780.25" y="685.7762"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="203" x="786.25" y="703.6732">3. Ejecuci&#243;n de la Confirmaci&#243;n</text><path d="M15,728.4822 L78,728.4822 L78,738.1882 L68,748.1882 L15,748.1882 L15,728.4822 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="633.1022" style="stroke:#000000;stroke-width:1.0;" width="1750.5" x="15" y="728.4822"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="30" y="743.3792">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="174" x="93" y="742.2411">[Acci&#243;n == CONFIRMAR_TURNO]</text><polygon fill="#000000" points="1261.5,767.8943,1271.5,771.8943,1261.5,775.8943,1265.5,771.8943" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="801.5" x2="1267.5" y1="771.8943" y2="771.8943"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="808.5" y="766.0853">11</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="293" x="826.5" y="766.0853">confirmarTurno(turnoId, "PACIENTE_VIA_EMAIL")</text><polygon fill="#000000" points="1682,799.6003,1692,803.6003,1682,807.6003,1686,803.6003" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1283.5" x2="1688" y1="803.6003" y2="803.6003"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1290.5" y="797.7913">12</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="256" x="1308.5" y="797.7913">SELECT * FROM turnos WHERE id = turnoId</text><path d="M25,818.6003 L411,818.6003 L411,828.3063 L401,838.3063 L25,838.3063 L25,818.6003 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="535.9842" style="stroke:#000000;stroke-width:1.0;" width="1730.5" x="25" y="818.6003"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="341" x="40" y="833.4973">Validaci&#243;n de Ventana de Tiempo (Regla de Negocio)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1283.5" x2="1325.5" y1="862.0123" y2="862.0123"/><line style="stroke:#000000;stroke-width:1.0;" x1="1325.5" x2="1325.5" y1="862.0123" y2="875.0123"/><line style="stroke:#000000;stroke-width:1.0;" x1="1284.5" x2="1325.5" y1="875.0123" y2="875.0123"/><polygon fill="#000000" points="1294.5,871.0123,1284.5,875.0123,1294.5,879.0123,1290.5,875.0123" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1290.5" y="856.2033">13</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178" x="1308.5" y="856.2033">validarVentanaConfirmacion()</text><path d="M1288,888.0123 L1288,968.0123 L1614,968.0123 L1614,898.0123 L1604,888.0123 L1288,888.0123 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M1604,888.0123 L1604,898.0123 L1614,898.0123 L1604,888.0123 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131" x="1294" y="906.9093">Verifica configuraci&#243;n:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="305" x="1294" y="924.6153">- No confirmar con demasiada antelaci&#243;n (diasMax)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="255" x="1294" y="942.3214">- No confirmar muy sobre la hora (diasMin)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203" x="1294" y="960.0274">- Validar hora de corte (horaCorte)</text><path d="M35,980.8364 L98,980.8364 L98,990.5424 L88,1000.5424 L35,1000.5424 L35,980.8364 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="366.7481" style="stroke:#000000;stroke-width:1.0;" width="1710.5" x="35" y="980.8364"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="50" y="995.7334">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="271" x="113" y="994.5953">[Fuera de Ventana (Muy temprano o muy tarde)]</text><polygon fill="#000000" points="812.5,1020.2484,802.5,1024.2484,812.5,1028.2484,808.5,1024.2484" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="806.5" x2="1272.5" y1="1024.2484" y2="1024.2484"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="818.5" y="1018.4394">14</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="296" x="836.5" y="1018.4394">Error: "No es posible confirmar en este momento"</text><polygon fill="#000000" points="578.5,1051.9544,568.5,1055.9544,578.5,1059.9544,574.5,1055.9544" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="572.5" x2="790.5" y1="1055.9544" y2="1055.9544"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="584.5" y="1050.1454">15</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182" x="602.5" y="1050.1454">Error 400 (Mensaje Explicativo)</text><polygon fill="#000000" points="87.5,1083.6604,77.5,1087.6604,87.5,1091.6604,83.5,1087.6604" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="81.5" x2="556.5" y1="1087.6604" y2="1087.6604"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="93.5" y="1081.8514">16</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="385" x="111.5" y="1081.8514">Muestra "El periodo de confirmaci&#243;n ha expirado o aun no inicia"</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="35" x2="1745.5" y1="1096.6604" y2="1096.6604"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123" x="40" y="1108.4194">[En Ventana Correcta]</text><line style="stroke:#000000;stroke-width:1.0;" x1="1283.5" x2="1325.5" y1="1136.3484" y2="1136.3484"/><line style="stroke:#000000;stroke-width:1.0;" x1="1325.5" x2="1325.5" y1="1136.3484" y2="1149.3484"/><line style="stroke:#000000;stroke-width:1.0;" x1="1284.5" x2="1325.5" y1="1149.3484" y2="1149.3484"/><polygon fill="#000000" points="1294.5,1145.3484,1284.5,1149.3484,1294.5,1153.3484,1290.5,1149.3484" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1290.5" y="1130.5393">17</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153" x="1308.5" y="1130.5393">setEstado(CONFIRMADO)</text><polygon fill="#000000" points="1682,1177.0544,1692,1181.0544,1682,1185.0544,1686,1181.0544" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1283.5" x2="1688" y1="1181.0544" y2="1181.0544"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1290.5" y="1175.2454">18</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="259" x="1308.5" y="1175.2454">UPDATE turnos SET estado='CONFIRMADO'</text><polygon fill="#000000" points="1578.5,1208.7604,1588.5,1212.7604,1578.5,1216.7604,1582.5,1212.7604" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1283.5" x2="1584.5" y1="1212.7604" y2="1212.7604"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1290.5" y="1206.9514">19</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="265" x="1308.5" y="1206.9514">logTurnoConfirmed("PACIENTE_VIA_EMAIL")</text><polygon fill="#000000" points="812.5,1240.4664,802.5,1244.4664,812.5,1248.4664,808.5,1244.4664" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="806.5" x2="1272.5" y1="1244.4664" y2="1244.4664"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="818.5" y="1238.6574">20</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144" x="836.5" y="1238.6574">TurnoDTO (Confirmado)</text><polygon fill="#000000" points="1682,1272.1724,1692,1276.1724,1682,1280.1724,1686,1276.1724" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1076.5" x2="1688" y1="1276.1724" y2="1276.1724"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1083.5" y="1270.3634">21</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="284" x="1101.5" y="1270.3634">Invalida el Token usado (delete o set used=true)</text><polygon fill="#000000" points="578.5,1303.8784,568.5,1307.8784,578.5,1311.8784,574.5,1307.8784" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="572.5" x2="790.5" y1="1307.8784" y2="1307.8784"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="584.5" y="1302.0694">22</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="77" x="602.5" y="1302.0694">HTTP 200 OK</text><polygon fill="#000000" points="87.5,1335.5844,77.5,1339.5844,87.5,1343.5844,83.5,1339.5844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="81.5" x2="556.5" y1="1339.5844" y2="1339.5844"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="93.5" y="1333.7754">23</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="269" x="111.5" y="1333.7754">Muestra "&#161;Gracias! Tu turno est&#225; confirmado"</text><!--SRC=[XLPHR-9647xthvXpfSPK1xdBzQL8z0J4tA63GC59NoAXnPwGlPXTQxr6IQl-cFo6llMn-METtRN19Y8b4l6kPxwT-UQRMTxfUzmYP2dZmcE5bgBOhb5v7ekrLE3FMSnHQFI1vN2TqvkCASrZdZ6XmH-czYqa24Ef5CfR4NpPCfwUpmgTIldGiewXsMfwZfGaHv6GmoLYDk7YOQ1uia7dCGgzjNm4Vy3Y1xA2O9afBZOma5AJnGztlvW_3-ZJWAsmRiLSOMvYKnRlSh8QQfM-vR14jUCnLkRbyhL7L2WXc-RHQUj-aN0zaPkcWztrJ6AKfPSmpTOiHw9RvdgZSFdRn8KnyBnU3pvse1_7c4lYEIUgCItPXbxFyuIa0YY-kTSWxroD0C8KOcSI4yzK98H208gKnGWl_mWUIz0yarsoFK-8WtPA97pMajZkiNNS_dZngVtuzCUFf0CkHMyukngD5zF-OXLTBwvcDdHpiEUP0w7zgwjn5_fhXTNH5Ag_G5fGWb9nks7Pyu-zI4SnHKTiw9U_1UbAYZkkjan1F-SvwIJcp3UQv3j6sJezsMy3CWgxiC244ma8B0N1ThXXYLIln3MKsqmAaaNBI_08RhyaxHdMBpfmmrAUK0UOc19YFJBqm18tXNBSZyBg_F1HAuPmPXayCvcc3AuNazAar5yNvhDb1ESiumVMptVs68stua-m_btmonfqEXqV_Zh4LkdOAnzAx59RNQYWRAI11Mirl2kXUeTdYp7emZASXCC8VeBHOZO54zxAXBUoAF3xrt0Hkl2W1vzhe0FlSW3jeq0MI2KNhAGi90tgfphdHjf78TIyRr3nEnvJ_SF7ZAko14yGvfhgUYJvHhEIy5sC2QuHZCfsBy_4YNnFUWMqQ8G014RhUqR33d9w3KLE-v0ft76sDOEZKnDvFT9wDMrsD-u023Bsb4gMT44RaO-Jz-2wfo6sUWr8PPyw47x7kAX4PcHJgT_j6PsnL9iHKAxXk1lDrAa98ZeG6LUDPFiks0Vcp_l3SNWLXQkRSNyLJllZYT-oEFj0cqFDVaLlIyQYvwLIU48oASyx86oKBBAZlg9g2yr8AsOySAGEXM21czHkNE56nbows5x541qhNvLO1mgb20xEJU4qCtIVIdcEEMfq5sQtPjA6AtaWrZnHe5kMSvOmeA6FQPbQa72MJzbZwxJpjdY2N9gPIUdUIyLA9owQJeunvKmIEs4fay0iX-RnOBqNRRMnVp0Y6XNe02hEWob5e8bqnQWVf0r8CvLW_Vm6wtNzXqf9HTEASi8SCfdpTOgrzAWFaSOtRALfAPhxTSozOgiHQi3WvmyVA2WKEVkEfllfPc2aIDcCnqrLSujqOLhG6PILJxsVKVba8Xr5zIwwP_lcfomPNOQKBgTxq5miU-vIkeH3iIV7thAnPgUeQ0WmH-t6Kr2rv-MiTThJjC_r_B8VXLNVBCF8i4K8lRC3nDbf2FiheWkftDZkBZMFIN2wkr-9uetYMj3BQ0P1rKs9V0FbzOKo5gufONzrkY4Rq5sAf0ffEACzJ7fQ5VWsTaCgNwDe3XUabDct_vV5lyzVJ1Up_1sbvCWsFByyxoMIr9H9_UFL_zT6zs5Uc9T7GzrUoxKj-XNn7m00]--></g></svg>